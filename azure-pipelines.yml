trigger:
  branches:
    exclude:
      - "*"

pr:
  branches:
    include:
      - "*"

pool:
  vmImage: 'ubuntu-latest'

steps:
  # Paso 1: Usar Node.js versi√≥n 15.x
  - task: NodeTool@0
    inputs:
      versionSource: 'spec'
      versionSpec: '15.x'

  # Paso 2: Instalar dependencias con npm
  - task: Npm@1
    inputs:
      command: 'install'
      workingDir: '$(System.DefaultWorkingDirectory)/codebase/rdicidr-0.1.0'

  # Paso 3: Ejecutar Linter (ESLint)
  - script: |
      cd $(System.DefaultWorkingDirectory)/codebase/rdicidr-0.1.0 && npm run lint
    displayName: 'Run Linter (ESLint)'

  # Paso 4: Ejecutar Formatter (Prettier)
  - script: |
      cd $(System.DefaultWorkingDirectory)/codebase/rdicidr-0.1.0 && npm run prettier
    displayName: 'Run Formatter (Prettier)'

  # Paso 5: Ejecutar Test (Jest)
  - script: |
      cd $(System.DefaultWorkingDirectory)/codebase/rdicidr-0.1.0 && CI=true npm run test
    displayName: 'Run Tests (Jest)'

  # Paso 6: Ejecutar Build
  - script: |
      cd $(System.DefaultWorkingDirectory)/codebase/rdicidr-0.1.0 && npm run build
    displayName: 'Run Build'
